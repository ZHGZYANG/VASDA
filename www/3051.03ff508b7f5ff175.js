"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3051],{3051:(w,u,a)=>{a.r(u),a.d(u,{ChatPageModule:()=>v});var d=a(9808),h=a(3075),o=a(1805),p=a(2788),e=a(1269),_=a(4981),Z=a(4474),m=a(6598),f=a(1649);function x(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"ion-list",13),e.TgZ(1,"ion-item",14),e.TgZ(2,"ion-button",15),e.NdJ("click",function(){const g=e.CHM(t).$implicit;return e.oxw().selectUser(g)})("click",function(){return e.CHM(t),e.oxw().closeAccordions()}),e._uU(3),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=i.$implicit;e.xp6(3),e.Oqu(t.patient_name)}}function M(n,i){if(1&n&&(e.TgZ(0,"ion-col",18),e.TgZ(1,"b"),e._uU(2),e.qZA(),e._UZ(3,"br"),e._UZ(4,"br"),e.TgZ(5,"span"),e._uU(6),e.qZA(),e.TgZ(7,"div",19),e._UZ(8,"br"),e._uU(9),e.ALo(10,"date"),e.qZA(),e._UZ(11,"div",20),e.qZA()),2&n){const t=e.oxw().$implicit,s=e.oxw();e.xp6(2),e.Oqu(s.patient.patient_name),e.xp6(4),e.Oqu(t.chat_message),e.xp6(3),e.hij("",e.xi3(10,3,t.chat_sent_date,"short")," ")}}function C(n,i){if(1&n&&(e.TgZ(0,"ion-col",21),e.TgZ(1,"b"),e._uU(2),e.qZA(),e._UZ(3,"br"),e._UZ(4,"br"),e.TgZ(5,"span"),e._uU(6),e.qZA(),e.TgZ(7,"div",19),e._UZ(8,"br"),e._uU(9),e.ALo(10,"date"),e.qZA(),e._UZ(11,"div",22),e.qZA()),2&n){const t=e.oxw().$implicit,s=e.oxw();e.xp6(2),e.Oqu(s.username),e.xp6(4),e.Oqu(t.chat_message),e.xp6(3),e.hij("",e.xi3(10,3,t.chat_sent_date,"short")," ")}}function P(n,i){if(1&n&&(e.TgZ(0,"ion-row"),e.YNc(1,M,12,6,"ion-col",16),e.YNc(2,C,12,6,"ion-col",17),e.qZA()),2&n){const t=i.$implicit,s=e.oxw();e.xp6(1),e.Q6J("ngIf",s.currentUser!==t.chat_sender),e.xp6(1),e.Q6J("ngIf",s.currentUser==t.chat_sender)}}const b=[{path:"",component:(()=>{class n{constructor(t,s,r,g){this.router=t,this.userService=s,this.menu=r,this.doctorService=g,this.selectedPatient="Select a Patient",this.newMsg="",this.messages=[],this.selectUser=function(l){console.log(this.allMessages),this.patient=l,console.log(this.patient),this.selectedPatient=l.patient_name,this.selectedMessages=[];for(let c=0;c<this.allMessages.length;c++)("Dr. Vogel"==this.allMessages[c].chat_receiver&&this.allMessages[c].chat_sender==l.patient_username||this.allMessages[c].chat_receiver==l.patient_username&&"Dr. Vogel"==this.allMessages[c].chat_sender)&&this.selectedMessages.push(this.allMessages[c]);console.log(this.selectedMessages)}}ngOnInit(){var t=JSON.parse(sessionStorage.getItem("user"));this.username=t.doctor_name,this.currentUser="Dr. Vogel",this.doctorService.getPatients(t.d_id).subscribe(s=>{this.patients=s,console.log(this.patients)},s=>{console.log(s)}),this.doctorService.getMessages().subscribe(s=>{this.allMessages=s},s=>{console.log(s)})}sendMsg(){const t=new Date,s={chat_sender:"Dr. Vogel",chat_receiver:this.patient.patient_username,chat_message:this.newMsg,chat_sent_date:t.toLocaleString()};this.selectedMessages.push(s),this.newMsg="",setTimeout(()=>{this.content.scrollToBottom(200)}),this.doctorService.sendMessages(s).subscribe(r=>{console.log(r)},r=>{console.log(r)})}closeAccordions(){document.querySelector("#state").value=void 0}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p.F0),e.Y36(_.K),e.Y36(o._q),e.Y36(Z.M))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-chat"]],viewQuery:function(t,s){if(1&t&&e.Gf(o.W2,5),2&t){let r;e.iGM(r=e.CRH())&&(s.content=r.first)}},decls:21,vars:5,consts:[["id","state"],["slot","header"],["slot","content",4,"ngFor","ngForOf"],["id","wrapper"],["id","container"],[4,"ngFor","ngForOf"],["slot","fixed",2,"bottom","0"],[2,"align-items","center"],["size","10"],["autosize","","maxRow","5",1,"message-input",3,"ngModel","ngModelChange"],["size","2"],["expand","block","fill","clear",1,"msg-btn",3,"disabled","click"],["name","send","slot","icon-only"],["slot","content"],["id","name"],["id","nameBtn","expand","full","fill","clear","color","dark",3,"click"],["size","5","class","message other-message",4,"ngIf"],["offset","7","size","5","class","message my-message",4,"ngIf"],["size","5",1,"message","other-message"],[1,"time"],[1,"tail-othermsg"],["offset","7","size","5",1,"message","my-message"],[1,"tail-mymsg"]],template:function(t,s){1&t&&(e.TgZ(0,"ion-header"),e.TgZ(1,"div"),e.TgZ(2,"ion-accordion-group",0),e.TgZ(3,"ion-accordion"),e.TgZ(4,"ion-item",1),e.TgZ(5,"p"),e.TgZ(6,"strong"),e._uU(7),e.qZA(),e.qZA(),e.qZA(),e.YNc(8,x,4,1,"ion-list",2),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"ion-content"),e.TgZ(10,"div",3),e.TgZ(11,"ion-grid",4),e.YNc(12,P,3,2,"ion-row",5),e.qZA(),e.qZA(),e.qZA(),e.TgZ(13,"ion-toolbar",6),e.TgZ(14,"ion-row",7),e.TgZ(15,"ion-col",8),e.TgZ(16,"textarea",9),e.NdJ("ngModelChange",function(g){return s.newMsg=g}),e.qZA(),e.qZA(),e.TgZ(17,"ion-col",10),e.TgZ(18,"ion-button",11),e.NdJ("click",function(){return s.sendMsg()}),e._UZ(19,"ion-icon",12),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e._UZ(20,"app-tab-bar")),2&t&&(e.xp6(7),e.Oqu(s.selectedPatient),e.xp6(1),e.Q6J("ngForOf",s.patients),e.xp6(4),e.Q6J("ngForOf",s.selectedMessages),e.xp6(4),e.Q6J("ngModel",s.newMsg),e.xp6(2),e.Q6J("disabled",""===s.newMsg))},directives:[o.Gu,o.eh,o.We,o.Ie,d.sg,o.W2,o.jY,o.sr,o.Nd,o.wI,h.Fj,m.Rk,h.JJ,h.On,o.YG,o.gu,f.p,o.q_,d.O5],pipes:[d.uU],styles:["#name[_ngcontent-%COMP%]{border-bottom:2px solid rgba(0,0,0,.433)}#nameBtn[_ngcontent-%COMP%]{width:100%;height:100%}#row[_ngcontent-%COMP%]{align-items:center;padding:0}#wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;height:100%;overflow:auto}.message[_ngcontent-%COMP%]{padding:10px;border-radius:10px;margin-bottom:20px;white-space:pre-wrap}.other-message[_ngcontent-%COMP%]{background:rgba(101,141,240,.716)}.my-message[_ngcontent-%COMP%]{background-color:#dccfcfb7}.time[_ngcontent-%COMP%]{float:right}.tail-mymsg[_ngcontent-%COMP%]{position:absolute;right:-15px;top:40px;border-radius:10px;width:20px;height:20px;white-space:pre-wrap;background-color:#000}.tail-othermsg[_ngcontent-%COMP%]{position:absolute;left:-15px;top:40px;border-radius:10px;width:20px;height:20px;white-space:pre-wrap;background-color:#000}.message-input[_ngcontent-%COMP%]{width:100%;border:1px solid var(--ion-color-medium);border-radius:10px;background:#fff;resize:none;padding-left:10px;padding-right:10px}.msg-btn[_ngcontent-%COMP%]{--padding-start: .5em;--padding-end: .5em}b[_ngcontent-%COMP%], span[_ngcontent-%COMP%]{color:#000}textarea[_ngcontent-%COMP%]{margin-top:5px}"]}),n})()}];let T=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[p.Bz.forChild(b)],p.Bz]}),n})();var A=a(5642);let v=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[d.ez,h.u5,o.Pc,T,A.K,m.G$]]}),n})()}}]);