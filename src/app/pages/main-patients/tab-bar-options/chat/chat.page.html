<ion-header>
  <ion-toolbar>
    <app-back-button slot="start"></app-back-button>
    <ion-title class="ion-text-center" style="margin-right: 10%">
      Chat
    </ion-title>
  </ion-toolbar>
</ion-header>
<ion-content>
  <div id="wrapper">
    <ion-grid id = "container">
      <ion-row *ngFor="let message of messages" >

        <ion-col size="10" class="message other-message" *ngIf="currentUser!==message['chat_sender']">
          <b>{{message['chat_sender']}}</b><br><br>
          <span>{{message['chat_message']}}</span>
          <div class = "time" text-right>
            <br>{{message['chat_sent_date'] | date:'short'}}
          </div>
          <div class="tail-othermsg"></div>
        </ion-col>

        <ion-col offset="2" size="10" class="message my-message" *ngIf="currentUser==message['chat_sender']">
          <b>{{user['patient_name']}}</b><br><br>
          <span>{{message['chat_message']}}</span>
          <div class = "time" text-right>
            <br>{{message['chat_sent_date'] | date:'short'}}
          </div>
          <div class="tail-mymsg"></div>
        </ion-col>

      </ion-row>
    </ion-grid>
  </div>
</ion-content>

<ion-toolbar slot="fixed" style="bottom: 0;">
  <ion-row style="align-items: center;" >
    <ion-col size="10">
      <textarea autosize rows="1" [(ngModel)]="newMsg" class="message-input"></textarea>
    </ion-col>
    <ion-col size="2">
      <ion-button expand="block" fill="clear" class="msg-btn" (click)=sendMsg() [disabled]="newMsg ===''">
        <ion-icon  name="send" slot="icon-only"></ion-icon>
      </ion-button>
    </ion-col>
  </ion-row>
</ion-toolbar>
<app-tab-bar></app-tab-bar>
