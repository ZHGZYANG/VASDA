"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7260],{7260:(T,l,s)=>{s.r(l),s.d(l,{ChatPageModule:()=>M});var g=s(9808),c=s(3075),a=s(1805),p=s(2788),e=s(1269),u=s(4981),d=s(4008),h=s(6598),m=s(1649);function Z(n,i){if(1&n&&(e.TgZ(0,"ion-col",14),e.TgZ(1,"b"),e._uU(2),e.qZA(),e._UZ(3,"br"),e._UZ(4,"br"),e.TgZ(5,"span"),e._uU(6),e.qZA(),e.TgZ(7,"div",15),e._UZ(8,"br"),e._uU(9),e.ALo(10,"date"),e.qZA(),e._UZ(11,"div",16),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.chat_sender),e.xp6(4),e.Oqu(t.chat_message),e.xp6(3),e.hij("",e.xi3(10,3,t.chat_sent_date,"short")," ")}}function f(n,i){if(1&n&&(e.TgZ(0,"ion-col",17),e.TgZ(1,"b"),e._uU(2),e.qZA(),e._UZ(3,"br"),e._UZ(4,"br"),e.TgZ(5,"span"),e._uU(6),e.qZA(),e.TgZ(7,"div",15),e._UZ(8,"br"),e._uU(9),e.ALo(10,"date"),e.qZA(),e._UZ(11,"div",18),e.qZA()),2&n){const t=e.oxw().$implicit,o=e.oxw();e.xp6(2),e.Oqu(o.user.patient_name),e.xp6(4),e.Oqu(t.chat_message),e.xp6(3),e.hij("",e.xi3(10,3,t.chat_sent_date,"short")," ")}}function x(n,i){if(1&n&&(e.TgZ(0,"ion-row"),e.YNc(1,Z,12,6,"ion-col",12),e.YNc(2,f,12,6,"ion-col",13),e.qZA()),2&n){const t=i.$implicit,o=e.oxw();e.xp6(1),e.Q6J("ngIf",o.currentUser!==t.chat_sender),e.xp6(1),e.Q6J("ngIf",o.currentUser==t.chat_sender)}}const _=[{path:"",component:(()=>{class n{constructor(t){this.userservice=t,this.newMsg="",this.messages=[]}ngOnInit(){this.user=JSON.parse(sessionStorage.getItem("user")),console.log(this.user),this.currentUser=this.user.patient_username,this.userservice.getMessages().subscribe(t=>{for(var o of(console.log(t),t))(o.chat_receiver==this.user.patient_username||o.chat_sender==this.user.patient_username)&&this.messages.push(o)},t=>{console.log(t)}),setTimeout(()=>{this.content.scrollToBottom(200)})}sendMsg(){const t=new Date,o={chat_sender:this.user.patient_username,chat_receiver:"Dr. Vogel",chat_message:this.newMsg,chat_sent_date:t.toLocaleString()};this.messages.push(o),this.newMsg="",setTimeout(()=>{this.content.scrollToBottom(200)}),this.userservice.sendMessages(o).subscribe(r=>{console.log(r)},r=>{console.log(r)})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(u.K))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-chat"]],viewQuery:function(t,o){if(1&t&&e.Gf(a.W2,5),2&t){let r;e.iGM(r=e.CRH())&&(o.content=r.first)}},decls:17,vars:3,consts:[["slot","start"],[1,"ion-text-center",2,"margin-right","10%"],["id","wrapper"],["id","container"],[4,"ngFor","ngForOf"],["slot","fixed",2,"bottom","0"],[2,"align-items","center"],["size","10"],["autosize","","rows","1",1,"message-input",3,"ngModel","ngModelChange"],["size","2"],["expand","block","fill","clear",1,"msg-btn",3,"disabled","click"],["name","send","slot","icon-only"],["size","10","class","message other-message",4,"ngIf"],["offset","2","size","10","class","message my-message",4,"ngIf"],["size","10",1,"message","other-message"],["text-right","",1,"time"],[1,"tail-othermsg"],["offset","2","size","10",1,"message","my-message"],[1,"tail-mymsg"]],template:function(t,o){1&t&&(e.TgZ(0,"ion-header"),e.TgZ(1,"ion-toolbar"),e._UZ(2,"app-back-button",0),e.TgZ(3,"ion-title",1),e._uU(4," Chat "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(5,"ion-content"),e.TgZ(6,"div",2),e.TgZ(7,"ion-grid",3),e.YNc(8,x,3,2,"ion-row",4),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"ion-toolbar",5),e.TgZ(10,"ion-row",6),e.TgZ(11,"ion-col",7),e.TgZ(12,"textarea",8),e.NdJ("ngModelChange",function(P){return o.newMsg=P}),e.qZA(),e.qZA(),e.TgZ(13,"ion-col",9),e.TgZ(14,"ion-button",10),e.NdJ("click",function(){return o.sendMsg()}),e._UZ(15,"ion-icon",11),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e._UZ(16,"app-tab-bar")),2&t&&(e.xp6(8),e.Q6J("ngForOf",o.messages),e.xp6(4),e.Q6J("ngModel",o.newMsg),e.xp6(2),e.Q6J("disabled",""===o.newMsg))},directives:[a.Gu,a.sr,d.W,a.wd,a.W2,a.jY,g.sg,a.Nd,a.wI,c.Fj,h.Rk,c.JJ,c.On,a.YG,a.gu,m.p,g.O5],pipes:[g.uU],styles:["ion-header[_ngcontent-%COMP%]{height:7%}#wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;padding:5%;height:100%;overflow:auto}.message[_ngcontent-%COMP%]{padding:10px;border-radius:10px;margin-bottom:20px;white-space:pre-wrap}.other-message[_ngcontent-%COMP%]{background:rgba(101,141,240,.716)}.my-message[_ngcontent-%COMP%]{background-color:#dccfcfb7}.time[_ngcontent-%COMP%]{float:right;color:#000}.tail-mymsg[_ngcontent-%COMP%]{position:absolute;right:-15px;top:40px;border-radius:10px;width:20px;height:20px;white-space:pre-wrap;background-color:#000}.tail-othermsg[_ngcontent-%COMP%]{position:absolute;left:-15px;top:40px;border-radius:10px;width:20px;height:20px;white-space:pre-wrap;background-color:#000}.message-input[_ngcontent-%COMP%]{width:100%;height:30px;border:1px solid var(--ion-color-medium);border-radius:10px;background:#fff;color:#000;resize:none;padding-left:10px;padding-right:10px}.msg-btn[_ngcontent-%COMP%]{--padding-start: .5em;--padding-end: .5em}b[_ngcontent-%COMP%], span[_ngcontent-%COMP%]{color:#000}textarea[_ngcontent-%COMP%]{margin-top:5px}"]}),n})()}];let C=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[p.Bz.forChild(_)],p.Bz]}),n})();var b=s(5642);let M=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[g.ez,c.u5,a.Pc,C,b.K,h.G$]]}),n})()}}]);